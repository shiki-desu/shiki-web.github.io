"use strict";(self["webpackChunkshiki_web"]=self["webpackChunkshiki_web"]||[]).push([[1982],{68199:function(e,l,a){var u=a(58788),n=a(51137),o=a(20641),t=a(8698),v=a(78668),r=a(46624),i=a(58859),s=a(41592),c=a(15822),d=a(26595),p=a(40088),f=a(74943),g=a(52874),C=a(94978),b=a(87950),h=a(39003),m=a(10705),w=a(42984),A=a(96929),W=a(98347),k=a(50953),y=a(45816),F=a(57646),$=a(3936),x=a(58777),R=a(20084);function K(e,l){return e&&e[0]&&e[1]&&l.isAfter(e[0],e[1])?[e[1],e[0]]:e}function M(e,l,a,u){return!!e||(!(!u||!u[l])||!!a[(l+1)%2])}function I(){return(0,o.pM)({name:"RangerPicker",inheritAttrs:!1,props:["prefixCls","id","popupStyle","dropdownClassName","transitionName","dropdownAlign","getPopupContainer","generateConfig","locale","placeholder","autofocus","disabled","format","picker","showTime","showNow","showHour","showMinute","showSecond","use12Hours","separator","value","defaultValue","defaultPickerValue","open","defaultOpen","disabledDate","disabledTime","dateRender","panelRender","ranges","allowEmpty","allowClear","suffixIcon","clearIcon","pickerRef","inputReadOnly","mode","renderExtraFooter","onChange","onOpenChange","onPanelChange","onCalendarChange","onFocus","onBlur","onMousedown","onMouseup","onMouseenter","onMouseleave","onClick","onOk","onKeydown","components","order","direction","activePickerIndex","autocomplete","minuteStep","hourStep","secondStep","hideDisabledOptions","disabledMinutes","presets","prevIcon","nextIcon","superPrevIcon","superNextIcon"],setup(e,l){let{attrs:a,expose:I}=l;const _=(0,o.EW)(()=>"date"===e.picker&&!!e.showTime||"time"===e.picker),E=(0,o.EW)(()=>e.presets),D=(0,o.EW)(()=>e.ranges),P=(0,C.A)(E,D),T=(0,k.KR)({}),V=(0,k.KR)(null),O=(0,k.KR)(null),S=(0,k.KR)(null),L=(0,k.KR)(null),B=(0,k.KR)(null),H=(0,k.KR)(null),N=(0,k.KR)(null),Y=(0,k.KR)(null);const X=(0,o.EW)(()=>(0,s.$r)((0,c.n6)(e.format,e.picker,e.showTime,e.use12Hours))),[q,z]=(0,y.A)(0,{value:(0,k.lW)(e,"activePickerIndex")}),j=(0,k.KR)(null),G=(0,o.EW)(()=>{const{disabled:l}=e;return Array.isArray(l)?l:[l||!1,l||!1]}),[J,Q]=(0,y.A)(null,{value:(0,k.lW)(e,"value"),defaultValue:e.defaultValue,postState:l=>"time"!==e.picker||e.order?K(l,e.generateConfig):l}),[U,Z,ee]=(0,A.A)({values:J,picker:(0,k.lW)(e,"picker"),defaultDates:e.defaultPickerValue,generateConfig:(0,k.lW)(e,"generateConfig")}),[le,ae]=(0,y.A)(J.value,{postState:l=>{let a=l;if(G.value[0]&&G.value[1])return a;for(let u=0;u<2;u+=1)!G.value[u]||(0,s._W)(a,u)||(0,s._W)(e.allowEmpty,u)||(a=(0,s.I6)(a,e.generateConfig.getNow(),u));return a}}),[ue,ne]=(0,y.A)([e.picker,e.picker],{value:(0,k.lW)(e,"mode")});(0,o.wB)(()=>e.picker,()=>{ne([e.picker,e.picker])});const oe=(l,a)=>{var u;ne(l),null===(u=e.onPanelChange)||void 0===u||u.call(e,a,l)},[te,ve]=(0,h.A)({picker:(0,k.lW)(e,"picker"),selectedValue:le,locale:(0,k.lW)(e,"locale"),disabled:G,disabledDate:(0,k.lW)(e,"disabledDate"),generateConfig:(0,k.lW)(e,"generateConfig")},T),[re,ie]=(0,y.A)(!1,{value:(0,k.lW)(e,"open"),defaultValue:e.defaultOpen,postState:e=>!G.value[q.value]&&e,onChange:l=>{var a;null===(a=e.onOpenChange)||void 0===a||a.call(e,l),!l&&j.value&&j.value.onClose&&j.value.onClose()}}),se=(0,o.EW)(()=>re.value&&0===q.value),ce=(0,o.EW)(()=>re.value&&1===q.value),de=(0,k.KR)(0),pe=(0,k.KR)(0),fe=(0,k.KR)(0),{width:ge}=(0,R.L)(V);(0,o.wB)([re,ge],()=>{!re.value&&V.value&&(fe.value=ge.value)});const{width:Ce}=(0,R.L)(O),{width:be}=(0,R.L)(Y),{width:he}=(0,R.L)(S),{width:me}=(0,R.L)(B);(0,o.wB)([q,re,Ce,be,he,me,()=>e.direction],()=>{pe.value=0,q.value?S.value&&B.value&&(pe.value=he.value+me.value,Ce.value&&be.value&&pe.value>Ce.value-be.value-("rtl"===e.direction||Y.value.offsetLeft>pe.value?0:Y.value.offsetLeft)&&(de.value=pe.value)):0===q.value&&(de.value=0)},{immediate:!0});const we=(0,k.KR)();function Ae(e,l){if(e)clearTimeout(we.value),T.value[l]=!0,z(l),ie(e),re.value||ee(null,l);else if(q.value===l){ie(e);const l=T.value;we.value=setTimeout(()=>{l===T.value&&(T.value={})})}}function We(e){Ae(!0,e),setTimeout(()=>{const l=[H,N][e];l.value&&l.value.focus()},0)}function ke(l,a){let u=l,n=(0,s._W)(u,0),o=(0,s._W)(u,1);const{generateConfig:t,locale:v,picker:r,order:i,onCalendarChange:c,allowEmpty:d,onChange:f,showTime:g}=e;n&&o&&t.isAfter(n,o)&&("week"===r&&!(0,p.Rz)(t,v.locale,n,o)||"quarter"===r&&!(0,p.d4)(t,n,o)||"week"!==r&&"quarter"!==r&&"time"!==r&&!(g?(0,p.n4)(t,n,o):(0,p.ny)(t,n,o))?(0===a?(u=[n,null],o=null):(n=null,u=[null,o]),T.value={[a]:!0}):"time"===r&&!1===i||(u=K(u,t))),ae(u);const C=u&&u[0]?(0,p.Fl)(u[0],{generateConfig:t,locale:v,format:X.value[0]}):"",b=u&&u[1]?(0,p.Fl)(u[1],{generateConfig:t,locale:v,format:X.value[0]}):"";if(c){const e={range:0===a?"start":"end"};c(u,[C,b],e)}const h=M(n,0,G.value,d),m=M(o,1,G.value,d),w=null===u||h&&m;w&&(Q(u),!f||(0,p.n4)(t,(0,s._W)(J.value,0),n)&&(0,p.n4)(t,(0,s._W)(J.value,1),o)||f(u,[C,b]));let A=null;0!==a||G.value[1]?1!==a||G.value[0]||(A=0):A=1,null===A||A===q.value||T.value[A]&&(0,s._W)(u,A)||!(0,s._W)(u,a)?Ae(!1,a):We(A)}const ye=e=>re&&j.value&&j.value.onKeydown?j.value.onKeydown(e):((0,F.$e)(!1,"Picker not correct forward Keydown operation. Please help to fire issue about this."),!1),Fe={formatList:X,generateConfig:(0,k.lW)(e,"generateConfig"),locale:(0,k.lW)(e,"locale")},[$e,xe]=(0,f.A)((0,o.EW)(()=>(0,s._W)(le.value,0)),Fe),[Re,Ke]=(0,f.A)((0,o.EW)(()=>(0,s._W)(le.value,1)),Fe),Me=(l,a)=>{const u=(0,p.$x)(l,{locale:e.locale,formatList:X.value,generateConfig:e.generateConfig}),n=0===a?te:ve;u&&!n(u)&&(ae((0,s.I6)(le.value,u,a)),ee(u,a))},[Ie,_e,Ee]=(0,g.A)({valueTexts:$e,onTextChange:e=>Me(e,0)}),[De,Pe,Te]=(0,g.A)({valueTexts:Re,onTextChange:e=>Me(e,1)}),[Ve,Oe]=(0,$.A)(null),[Se,Le]=(0,$.A)(null),[Be,He,Ne]=(0,W.A)(Ie,Fe),[Ye,Xe,qe]=(0,W.A)(De,Fe),ze=e=>{Le((0,s.I6)(le.value,e,q.value)),0===q.value?He(e):Xe(e)},je=()=>{Le((0,s.I6)(le.value,null,q.value)),0===q.value?Ne():qe()},Ge=(l,a)=>({forwardKeydown:ye,onBlur:l=>{var a;null===(a=e.onBlur)||void 0===a||a.call(e,l)},isClickOutside:e=>!(0,c.P5)([O.value,S.value,L.value,V.value],e),onFocus:a=>{var u;z(l),null===(u=e.onFocus)||void 0===u||u.call(e,a)},triggerOpen:e=>{Ae(e,l)},onSubmit:()=>{if(!le.value||e.disabledDate&&e.disabledDate(le.value[l]))return!1;ke(le.value,l),a()},onCancel:()=>{Ae(!1,l),ae(J.value),a()}}),[Je,{focused:Qe,typing:Ue}]=(0,r.A)((0,n.A)((0,n.A)({},Ge(0,Ee)),{blurToCancel:_,open:se,value:Ie,onKeydown:(l,a)=>{var u;null===(u=e.onKeydown)||void 0===u||u.call(e,l,a)}})),[Ze,{focused:el,typing:ll}]=(0,r.A)((0,n.A)((0,n.A)({},Ge(1,Te)),{blurToCancel:_,open:ce,value:De,onKeydown:(l,a)=>{var u;null===(u=e.onKeydown)||void 0===u||u.call(e,l,a)}})),al=l=>{var a;null===(a=e.onClick)||void 0===a||a.call(e,l),re.value||H.value.contains(l.target)||N.value.contains(l.target)||(G.value[0]?G.value[1]||We(1):We(0))},ul=l=>{var a;null===(a=e.onMousedown)||void 0===a||a.call(e,l),!re.value||!Qe.value&&!el.value||H.value.contains(l.target)||N.value.contains(l.target)||l.preventDefault()},nl=(0,o.EW)(()=>{var l;return(null===(l=J.value)||void 0===l?void 0:l[0])?(0,p.Fl)(J.value[0],{locale:e.locale,format:"YYYYMMDDHHmmss",generateConfig:e.generateConfig}):""}),ol=(0,o.EW)(()=>{var l;return(null===(l=J.value)||void 0===l?void 0:l[1])?(0,p.Fl)(J.value[1],{locale:e.locale,format:"YYYYMMDDHHmmss",generateConfig:e.generateConfig}):""});(0,o.wB)([re,$e,Re],()=>{re.value||(ae(J.value),$e.value.length&&""!==$e.value[0]?xe.value!==Ie.value&&Ee():_e(""),Re.value.length&&""!==Re.value[0]?Ke.value!==De.value&&Te():Pe(""))}),(0,o.wB)([nl,ol],()=>{ae(J.value)}),I({focus:()=>{H.value&&H.value.focus()},blur:()=>{H.value&&H.value.blur(),N.value&&N.value.blur()}});const tl=(0,o.EW)(()=>re.value&&Se.value&&Se.value[0]&&Se.value[1]&&e.generateConfig.isAfter(Se.value[1],Se.value[0])?Se.value:null);function vl(){let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{generateConfig:t,showTime:r,dateRender:i,direction:c,disabledTime:d,prefixCls:f,locale:g}=e;let C=r;if(r&&"object"===typeof r&&r.defaultValue){const e=r.defaultValue;C=(0,n.A)((0,n.A)({},r),{defaultValue:(0,s._W)(e,q.value)||void 0})}let h=null;return i&&(h=e=>{let{current:l,today:a}=e;return i({current:l,today:a,info:{range:q.value?"end":"start"}})}),(0,o.bF)(b.ig,{value:{inRange:!0,panelPosition:l,rangedValue:Ve.value||le.value,hoverRangedValue:tl.value}},{default:()=>[(0,o.bF)(v.A,(0,u.A)((0,u.A)((0,u.A)({},e),a),{},{dateRender:h,showTime:C,mode:ue.value[q.value],generateConfig:t,style:void 0,direction:c,disabledDate:0===q.value?te:ve,disabledTime:e=>!!d&&d(e,0===q.value?"start":"end"),class:(0,x.A)({[`${f}-panel-focused`]:0===q.value?!Ue.value:!ll.value}),value:(0,s._W)(le.value,q.value),locale:g,tabIndex:-1,onPanelChange:(e,a)=>{0===q.value&&Ne(!0),1===q.value&&qe(!0),oe((0,s.I6)(ue.value,a,q.value),(0,s.I6)(le.value,e,q.value));let u=e;"right"===l&&ue.value[q.value]===a&&(u=(0,p.XC)(u,a,t,-1)),ee(u,q.value)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:0===q.value?(0,s._W)(le.value,1):(0,s._W)(le.value,0)}),null)]})}const rl=(e,l)=>{const a=(0,s.I6)(le.value,e,q.value);"submit"===l||"key"!==l&&!_.value?(ke(a,q.value),0===q.value?Ne():qe()):ae(a)};return(0,d.dK)({operationRef:j,hideHeader:(0,o.EW)(()=>"time"===e.picker),onDateMouseenter:ze,onDateMouseleave:je,hideRanges:(0,o.EW)(()=>!0),onSelect:rl,open:re}),()=>{const{prefixCls:l="rc-picker",id:v,popupStyle:r,dropdownClassName:d,transitionName:f,dropdownAlign:g,getPopupContainer:C,generateConfig:b,locale:h,placeholder:A,autofocus:W,picker:k="date",showTime:y,separator:F="~",disabledDate:$,panelRender:R,allowClear:K,suffixIcon:M,clearIcon:I,inputReadOnly:E,renderExtraFooter:D,onMouseenter:T,onMouseleave:z,onMouseup:j,onOk:Q,components:ae,direction:ne,autocomplete:oe="off"}=e,te="rtl"===ne?{right:`${pe.value}px`}:{left:`${pe.value}px`};function ve(){let e;const a=(0,m.A)(l,ue.value[q.value],D),u=(0,w.A)({prefixCls:l,components:ae,needConfirmButton:_.value,okDisabled:!(0,s._W)(le.value,q.value)||$&&$(le.value[q.value]),locale:h,onOk:()=>{(0,s._W)(le.value,q.value)&&(ke(le.value,q.value),Q&&Q(le.value))}});if("time"===k||y)e=vl();else{const l=0===q.value?U.value:Z.value,a=(0,p.XC)(l,k,b),u=ue.value[q.value],n=u===k,t=vl(!!n&&"left",{pickerValue:l,onPickerValueChange:e=>{ee(e,q.value)}}),v=vl("right",{pickerValue:a,onPickerValueChange:e=>{ee((0,p.XC)(e,k,b,-1),q.value)}});e="rtl"===ne?(0,o.bF)(o.FK,null,[v,n&&t]):(0,o.bF)(o.FK,null,[t,n&&v])}let n=(0,o.bF)("div",{class:`${l}-panel-layout`},[(0,o.bF)(i.A,{prefixCls:l,presets:P.value,onClick:e=>{ke(e,null),Ae(!1,q.value)},onHover:e=>{Oe(e)}},null),(0,o.bF)("div",null,[(0,o.bF)("div",{class:`${l}-panels`},[e]),(a||u)&&(0,o.bF)("div",{class:`${l}-footer`},[a,u])])]);return R&&(n=R(n)),(0,o.bF)("div",{class:`${l}-panel-container`,style:{marginLeft:`${de.value}px`},ref:O,onMousedown:e=>{e.preventDefault()}},[n])}const ie=(0,o.bF)("div",{class:(0,x.A)(`${l}-range-wrapper`,`${l}-${k}-range-wrapper`),style:{minWidth:`${fe.value}px`}},[(0,o.bF)("div",{ref:Y,class:`${l}-range-arrow`,style:te},null),ve()]);let se,ce;M&&(se=(0,o.bF)("span",{class:`${l}-suffix`},[M])),K&&((0,s._W)(J.value,0)&&!G.value[0]||(0,s._W)(J.value,1)&&!G.value[1])&&(ce=(0,o.bF)("span",{onMousedown:e=>{e.preventDefault(),e.stopPropagation()},onMouseup:e=>{e.preventDefault(),e.stopPropagation();let l=J.value;G.value[0]||(l=(0,s.I6)(l,null,0)),G.value[1]||(l=(0,s.I6)(l,null,1)),ke(l,null),Ae(!1,q.value)},class:`${l}-clear`},[I||(0,o.bF)("span",{class:`${l}-clear-btn`},null)]));const ge={size:(0,c.Ax)(k,X.value[0],b)};let Ce=0,be=0;S.value&&L.value&&B.value&&(0===q.value?be=S.value.offsetWidth:(Ce=pe.value,be=L.value.offsetWidth));const he="rtl"===ne?{right:`${Ce}px`}:{left:`${Ce}px`};return(0,o.bF)("div",(0,u.A)({ref:V,class:(0,x.A)(l,`${l}-range`,a.class,{[`${l}-disabled`]:G.value[0]&&G.value[1],[`${l}-focused`]:0===q.value?Qe.value:el.value,[`${l}-rtl`]:"rtl"===ne}),style:a.style,onClick:al,onMouseenter:T,onMouseleave:z,onMousedown:ul,onMouseup:j},(0,s.Ay)(e)),[(0,o.bF)("div",{class:(0,x.A)(`${l}-input`,{[`${l}-input-active`]:0===q.value,[`${l}-input-placeholder`]:!!Be.value}),ref:S},[(0,o.bF)("input",(0,u.A)((0,u.A)((0,u.A)({id:v,disabled:G.value[0],readonly:E||"function"===typeof X.value[0]||!Ue.value,value:Be.value||Ie.value,onInput:e=>{_e(e.target.value)},autofocus:W,placeholder:(0,s._W)(A,0)||"",ref:H},Je.value),ge),{},{autocomplete:oe}),null)]),(0,o.bF)("div",{class:`${l}-range-separator`,ref:B},[F]),(0,o.bF)("div",{class:(0,x.A)(`${l}-input`,{[`${l}-input-active`]:1===q.value,[`${l}-input-placeholder`]:!!Ye.value}),ref:L},[(0,o.bF)("input",(0,u.A)((0,u.A)((0,u.A)({disabled:G.value[1],readonly:E||"function"===typeof X.value[0]||!ll.value,value:Ye.value||De.value,onInput:e=>{Pe(e.target.value)},placeholder:(0,s._W)(A,1)||"",ref:N},Ze.value),ge),{},{autocomplete:oe}),null)]),(0,o.bF)("div",{class:`${l}-active-bar`,style:(0,n.A)((0,n.A)({},he),{width:`${be}px`,position:"absolute"})},null),se,ce,(0,o.bF)(t.A,{visible:re.value,popupStyle:r,prefixCls:l,dropdownClassName:d,dropdownAlign:g,getPopupContainer:C,transitionName:f,range:!0,direction:ne},{default:()=>[(0,o.bF)("div",{style:{pointerEvents:"none",position:"absolute",top:0,bottom:0,left:0,right:0}},null)],popupElement:()=>ie})])}}})}const _=I();l.A=_}}]);