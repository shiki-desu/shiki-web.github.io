"use strict";(self["webpackChunkshiki_web"]=self["webpackChunkshiki_web"]||[]).push([[6601],{10820:function(e,t,o){o.d(t,{A:function(){return D}});var i=o(51137),n=o(20641),s=o(50953),u=o(86025),r=o(17948),l=o(70556),a=o(74495),p=o(82160),h=o(58788),c=o(76336),d=o(48983),m=o(26723),f=o(16453),g=(0,n.pM)({compatConfig:{MODE:3},name:"Popup",inheritAttrs:!1,props:c.l4,setup(e,t){let{attrs:o,slots:u,expose:r}=t;const l=(0,s.IJ)(!1),a=(0,s.IJ)(!1),p=(0,s.IJ)(),c=(0,s.IJ)();return(0,n.wB)([()=>e.visible,()=>e.mobile],()=>{l.value=e.visible,e.visible&&e.mobile&&(a.value=!0)},{immediate:!0,flush:"post"}),r({forceAlign:()=>{var e;null===(e=p.value)||void 0===e||e.forceAlign()},getElement:()=>{var e;return null===(e=p.value)||void 0===e?void 0:e.getElement()}}),()=>{const t=(0,i.A)((0,i.A)((0,i.A)({},e),o),{visible:l.value}),s=a.value?(0,n.bF)(m.A,(0,h.A)((0,h.A)({},t),{},{mobile:e.mobile,ref:p}),{default:u.default}):(0,n.bF)(f.A,(0,h.A)((0,h.A)({},t),{},{ref:p}),{default:u.default});return(0,n.bF)("div",{ref:c},[(0,n.bF)(d.A,t,null),s])}}});function v(e,t,o){return o?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function T(e,t,o){const n=e[t]||{};return(0,i.A)((0,i.A)({},n),o)}function b(e,t,o,i){const{points:n}=o,s=Object.keys(e);for(let u=0;u<s.length;u+=1){const o=s[u];if(v(e[o].points,n,i))return`${t}-placement-${o}`}return""}var P=o(52315),C=o(16952),A=o(58777),w=o(51927),x=o(77432),y=o(87633);const M=["onClick","onMousedown","onTouchstart","onMouseenter","onMouseleave","onFocus","onBlur","onContextmenu"];var O=(0,n.pM)({compatConfig:{MODE:3},name:"Trigger",mixins:[P.A],inheritAttrs:!1,props:(0,u.R)(),setup(e){const t=(0,n.EW)(()=>{const{popupPlacement:t,popupAlign:o,builtinPlacements:i}=e;return t&&i?T(i,t,o):o}),o=(0,s.IJ)(null),i=e=>{o.value=e};return{vcTriggerContext:(0,n.WQ)("vcTriggerContext",{}),popupRef:o,setPopupRef:i,triggerRef:(0,s.IJ)(null),align:t,focusTime:null,clickOutsideHandler:null,contextmenuOutsideHandler1:null,contextmenuOutsideHandler2:null,touchOutsideHandler:null,attachId:null,delayTimer:null,hasPopupMouseDown:!1,preClickTime:null,preTouchTime:null,mouseDownTimeout:null,childOriginEvents:{}}},data(){const e=this.$props;let t;return t=void 0!==this.popupVisible?!!e.popupVisible:!!e.defaultPopupVisible,M.forEach(e=>{this[`fire${e}`]=t=>{this.fireEvents(e,t)}}),{prevPopupVisible:t,sPopupVisible:t,point:null}},watch:{popupVisible(e){void 0!==e&&(this.prevPopupVisible=this.sPopupVisible,this.sPopupVisible=e)}},created(){(0,n.Gt)("vcTriggerContext",{onPopupMouseDown:this.onPopupMouseDown,onPopupMouseenter:this.onPopupMouseenter,onPopupMouseleave:this.onPopupMouseleave}),(0,y.T)(this)},deactivated(){this.setPopupVisible(!1)},mounted(){this.$nextTick(()=>{this.updatedCal()})},updated(){this.$nextTick(()=>{this.updatedCal()})},beforeUnmount(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),l.A.cancel(this.attachId)},methods:{updatedCal(){const e=this.$props,t=this.$data;if(t.sPopupVisible){let t;this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextmenuToShow()||(t=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=(0,p.A)(t,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(t=t||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=(0,p.A)(t,"touchstart",this.onDocumentClick,!!x.A&&{passive:!1})),!this.contextmenuOutsideHandler1&&this.isContextmenuToShow()&&(t=t||e.getDocument(this.getRootDomNode()),this.contextmenuOutsideHandler1=(0,p.A)(t,"scroll",this.onContextmenuClose)),!this.contextmenuOutsideHandler2&&this.isContextmenuToShow()&&(this.contextmenuOutsideHandler2=(0,p.A)(window,"blur",this.onContextmenuClose))}else this.clearOutsideHandler()},onMouseenter(e){const{mouseEnterDelay:t}=this.$props;this.fireEvents("onMouseenter",e),this.delaySetPopupVisible(!0,t,t?null:e)},onMouseMove(e){this.fireEvents("onMousemove",e),this.setPoint(e)},onMouseleave(e){this.fireEvents("onMouseleave",e),this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onPopupMouseenter(){const{vcTriggerContext:e={}}=this;e.onPopupMouseenter&&e.onPopupMouseenter(),this.clearDelayTimer()},onPopupMouseleave(e){var t;if(e&&e.relatedTarget&&!e.relatedTarget.setTimeout&&(0,r.A)(null===(t=this.popupRef)||void 0===t?void 0:t.getElement(),e.relatedTarget))return;this.isMouseLeaveToHide()&&this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay);const{vcTriggerContext:o={}}=this;o.onPopupMouseleave&&o.onPopupMouseleave(e)},onFocus(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.$props.focusDelay))},onMousedown(e){this.fireEvents("onMousedown",e),this.preClickTime=Date.now()},onTouchstart(e){this.fireEvents("onTouchstart",e),this.preTouchTime=Date.now()},onBlur(e){(0,r.A)(e.target,e.relatedTarget||document.activeElement)||(this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.$props.blurDelay))},onContextmenu(e){e.preventDefault(),this.fireEvents("onContextmenu",e),this.setPopupVisible(!0,e)},onContextmenuClose(){this.isContextmenuToShow()&&this.close()},onClick(e){if(this.fireEvents("onClick",e),this.focusTime){let e;if(this.preClickTime&&this.preTouchTime?e=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?e=this.preClickTime:this.preTouchTime&&(e=this.preTouchTime),Math.abs(e-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,this.isClickToShow()&&(this.isClickToHide()||this.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault(),e&&e.domEvent&&e.domEvent.preventDefault();const t=!this.$data.sPopupVisible;(this.isClickToHide()&&!t||t&&this.isClickToShow())&&this.setPopupVisible(!this.$data.sPopupVisible,e)},onPopupMouseDown(){const{vcTriggerContext:e={}}=this;this.hasPopupMouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout(()=>{this.hasPopupMouseDown=!1},0),e.onPopupMouseDown&&e.onPopupMouseDown(...arguments)},onDocumentClick(e){if(this.$props.mask&&!this.$props.maskClosable)return;const t=e.target,o=this.getRootDomNode(),i=this.getPopupDomNode();(0,r.A)(o,t)&&!this.isContextMenuOnly()||(0,r.A)(i,t)||this.hasPopupMouseDown||this.delaySetPopupVisible(!1,.1)},getPopupDomNode(){var e;return(null===(e=this.popupRef)||void 0===e?void 0:e.getElement())||null},getRootDomNode(){var e,t,o,i;const{getTriggerDOMNode:n}=this.$props;if(n){const o="#comment"===(null===(t=null===(e=this.triggerRef)||void 0===e?void 0:e.$el)||void 0===t?void 0:t.nodeName)?null:(0,a.oK)(this.triggerRef);return(0,a.oK)(n(o))}try{const e="#comment"===(null===(i=null===(o=this.triggerRef)||void 0===o?void 0:o.$el)||void 0===i?void 0:i.nodeName)?null:(0,a.oK)(this.triggerRef);if(e)return e}catch(s){}return(0,a.oK)(this)},handleGetPopupClassFromAlign(e){const t=[],o=this.$props,{popupPlacement:i,builtinPlacements:n,prefixCls:s,alignPoint:u,getPopupClassNameFromAlign:r}=o;return i&&n&&t.push(b(n,s,e,u)),r&&t.push(r(e)),t.join(" ")},getPopupAlign(){const e=this.$props,{popupPlacement:t,popupAlign:o,builtinPlacements:i}=e;return t&&i?T(i,t,o):o},getComponent(){const e={};this.isMouseEnterToShow()&&(e.onMouseenter=this.onPopupMouseenter),this.isMouseLeaveToHide()&&(e.onMouseleave=this.onPopupMouseleave),e.onMousedown=this.onPopupMouseDown,e[x.A?"onTouchstartPassive":"onTouchstart"]=this.onPopupMouseDown;const{handleGetPopupClassFromAlign:t,getRootDomNode:o,$attrs:s}=this,{prefixCls:r,destroyPopupOnHide:l,popupClassName:p,popupAnimation:h,popupTransitionName:c,popupStyle:d,mask:m,maskAnimation:f,maskTransitionName:v,zIndex:T,stretch:b,alignPoint:P,mobile:C,arrow:A,forceRender:w}=this.$props,{sPopupVisible:y,point:M}=this.$data,O=(0,i.A)((0,i.A)({prefixCls:r,arrow:A,destroyPopupOnHide:l,visible:y,point:P?M:null,align:this.align,animation:h,getClassNameFromAlign:t,stretch:b,getRootDomNode:o,mask:m,zIndex:T,transitionName:c,maskAnimation:f,maskTransitionName:v,class:p,style:d,onAlign:s.onPopupAlign||u.l},e),{ref:this.setPopupRef,mobile:C,forceRender:w});return(0,n.bF)(g,O,{default:this.$slots.popup||(()=>(0,a.QQ)(this,"popup"))})},attachParent(e){l.A.cancel(this.attachId);const{getPopupContainer:t,getDocument:o}=this.$props,i=this.getRootDomNode();let n;t?(i||0===t.length)&&(n=t(i)):n=o(this.getRootDomNode()).body,n?n.appendChild(e):this.attachId=(0,l.A)(()=>{this.attachParent(e)})},getContainer(){const{$props:e}=this,{getDocument:t}=e,o=t(this.getRootDomNode()).createElement("div");return o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",this.attachParent(o),o},setPopupVisible(e,t){const{alignPoint:o,sPopupVisible:i,onPopupVisibleChange:n}=this;this.clearDelayTimer(),i!==e&&((0,a.cK)(this,"popupVisible")||this.setState({sPopupVisible:e,prevPopupVisible:i}),n&&n(e)),o&&t&&e&&this.setPoint(t)},setPoint(e){const{alignPoint:t}=this.$props;t&&e&&this.setState({point:{pageX:e.pageX,pageY:e.pageY}})},handlePortalUpdate(){this.prevPopupVisible!==this.sPopupVisible&&this.afterPopupVisibleChange(this.sPopupVisible)},delaySetPopupVisible(e,t,o){const i=1e3*t;if(this.clearDelayTimer(),i){const t=o?{pageX:o.pageX,pageY:o.pageY}:null;this.delayTimer=setTimeout(()=>{this.setPopupVisible(e,t),this.clearDelayTimer()},i)}else this.setPopupVisible(e,o)},clearDelayTimer(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},clearOutsideHandler(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextmenuOutsideHandler1&&(this.contextmenuOutsideHandler1.remove(),this.contextmenuOutsideHandler1=null),this.contextmenuOutsideHandler2&&(this.contextmenuOutsideHandler2.remove(),this.contextmenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains(e){let t=()=>{};const o=(0,a.kQ)(this);return this.childOriginEvents[e]&&o[e]?this[`fire${e}`]:(t=this.childOriginEvents[e]||o[e]||t,t)},isClickToShow(){const{action:e,showAction:t}=this.$props;return-1!==e.indexOf("click")||-1!==t.indexOf("click")},isContextMenuOnly(){const{action:e}=this.$props;return"contextmenu"===e||1===e.length&&"contextmenu"===e[0]},isContextmenuToShow(){const{action:e,showAction:t}=this.$props;return-1!==e.indexOf("contextmenu")||-1!==t.indexOf("contextmenu")},isClickToHide(){const{action:e,hideAction:t}=this.$props;return-1!==e.indexOf("click")||-1!==t.indexOf("click")},isMouseEnterToShow(){const{action:e,showAction:t}=this.$props;return-1!==e.indexOf("hover")||-1!==t.indexOf("mouseenter")},isMouseLeaveToHide(){const{action:e,hideAction:t}=this.$props;return-1!==e.indexOf("hover")||-1!==t.indexOf("mouseleave")},isFocusToShow(){const{action:e,showAction:t}=this.$props;return-1!==e.indexOf("focus")||-1!==t.indexOf("focus")},isBlurToHide(){const{action:e,hideAction:t}=this.$props;return-1!==e.indexOf("focus")||-1!==t.indexOf("blur")},forcePopupAlign(){var e;this.$data.sPopupVisible&&(null===(e=this.popupRef)||void 0===e||e.forceAlign())},fireEvents(e,t){this.childOriginEvents[e]&&this.childOriginEvents[e](t);const o=this.$props[e]||this.$attrs[e];o&&o(t)},close(){this.setPopupVisible(!1)}},render(){const{$attrs:e}=this,t=(0,a.Gk)((0,a.$c)(this)),{alignPoint:o,getPopupContainer:s}=this.$props,u=t[0];this.childOriginEvents=(0,a.kQ)(u);const l={key:"trigger"};this.isContextmenuToShow()?l.onContextmenu=this.onContextmenu:l.onContextmenu=this.createTwoChains("onContextmenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMousedown=this.onMousedown,l[x.A?"onTouchstartPassive":"onTouchstart"]=this.onTouchstart):(l.onClick=this.createTwoChains("onClick"),l.onMousedown=this.createTwoChains("onMousedown"),l[x.A?"onTouchstartPassive":"onTouchstart"]=this.createTwoChains("onTouchstart")),this.isMouseEnterToShow()?(l.onMouseenter=this.onMouseenter,o&&(l.onMousemove=this.onMouseMove)):l.onMouseenter=this.createTwoChains("onMouseenter"),this.isMouseLeaveToHide()?l.onMouseleave=this.onMouseleave:l.onMouseleave=this.createTwoChains("onMouseleave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=e=>{!e||e.relatedTarget&&(0,r.A)(e.target,e.relatedTarget)||this.createTwoChains("onBlur")(e)});const p=(0,A.A)(u&&u.props&&u.props.class,e.class);p&&(l.class=p);const h=(0,w.Ob)(u,(0,i.A)((0,i.A)({},l),{ref:"triggerRef"}),!0,!0),c=(0,n.bF)(C.A,{key:"portal",getContainer:s&&(()=>s(this.getRootDomNode())),didUpdate:this.handlePortalUpdate,visible:this.$data.sPopupVisible},{default:this.getComponent});return(0,n.bF)(n.FK,null,[h,c])}}),D=O},18998:function(e,t,o){var i=o(50953),n=o(20641);t.A=e=>{const t=(0,i.IJ)({width:0,height:0});function o(e){t.value={width:e.offsetWidth,height:e.offsetHeight}}const s=(0,n.EW)(()=>{const o={};if(e.value){const{width:i,height:n}=t.value;-1!==e.value.indexOf("height")&&n?o.height=`${n}px`:-1!==e.value.indexOf("minHeight")&&n&&(o.minHeight=`${n}px`),-1!==e.value.indexOf("width")&&i?o.width=`${i}px`:-1!==e.value.indexOf("minWidth")&&i&&(o.minWidth=`${i}px`)}return o});return[s,o]}},22168:function(e,t,o){function i(e){let{prefixCls:t,animation:o,transitionName:i}=e;return o?{name:`${t}-${o}`}:i?{name:i}:{}}o.d(t,{V:function(){return i}})},28354:function(e,t,o){var i=o(50953),n=o(20641),s=o(70556),u=function(e,t,o,i){function n(e){return e instanceof o?e:new o(function(t){t(e)})}return new(o||(o=Promise))(function(o,s){function u(e){try{l(i.next(e))}catch(t){s(t)}}function r(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?o(e.value):n(e.value).then(u,r)}l((i=i.apply(e,t||[])).next())})};const r=["measure","align",null,"motion"];t.A=(e,t)=>{const o=(0,i.IJ)(null),l=(0,i.IJ)(),a=(0,i.IJ)(!1);function p(e){a.value||(o.value=e)}function h(){s.A.cancel(l.value)}function c(e){h(),l.value=(0,s.A)(()=>{let t=o.value;switch(o.value){case"align":t="motion";break;case"motion":t="stable";break;default:}p(t),null===e||void 0===e||e()})}return(0,n.wB)(e,()=>{p("measure")},{immediate:!0,flush:"post"}),(0,n.sV)(()=>{(0,n.wB)(o,()=>{switch(o.value){case"measure":t();break;default:}o.value&&(l.value=(0,s.A)(()=>u(void 0,void 0,void 0,function*(){const e=r.indexOf(o.value),t=r[e+1];t&&-1!==e&&p(t)})))},{immediate:!0,flush:"post"})}),(0,n.xo)(()=>{a.value=!0,h()}),[o,c]}},76336:function(e,t,o){o.d(t,{Tw:function(){return n},b:function(){return s},l4:function(){return u}});var i=o(51137);const n={visible:Boolean,prefixCls:String,zIndex:Number,destroyPopupOnHide:Boolean,forceRender:Boolean,arrow:{type:Boolean,default:!0},animation:[String,Object],transitionName:String,stretch:{type:String},align:{type:Object},point:{type:Object},getRootDomNode:{type:Function},getClassNameFromAlign:{type:Function},onAlign:{type:Function},onMouseenter:{type:Function},onMouseleave:{type:Function},onMousedown:{type:Function},onTouchstart:{type:Function}},s=(0,i.A)((0,i.A)({},n),{mobile:{type:Object}}),u=(0,i.A)((0,i.A)({},n),{mask:Boolean,mobile:{type:Object},maskAnimation:String,maskTransitionName:String})},86025:function(e,t,o){o.d(t,{R:function(){return r},l:function(){return u}});var i=o(4718);function n(){return""}function s(e){return e?e.ownerDocument:window.document}function u(){}const r=()=>({action:i.A.oneOfType([i.A.string,i.A.arrayOf(i.A.string)]).def([]),showAction:i.A.any.def([]),hideAction:i.A.any.def([]),getPopupClassNameFromAlign:i.A.any.def(n),onPopupVisibleChange:Function,afterPopupVisibleChange:i.A.func.def(u),popup:i.A.any,arrow:i.A.bool.def(!0),popupStyle:{type:Object,default:void 0},prefixCls:i.A.string.def("rc-trigger-popup"),popupClassName:i.A.string.def(""),popupPlacement:String,builtinPlacements:i.A.object,popupTransitionName:String,popupAnimation:i.A.any,mouseEnterDelay:i.A.number.def(0),mouseLeaveDelay:i.A.number.def(.1),zIndex:Number,focusDelay:i.A.number.def(0),blurDelay:i.A.number.def(.15),getPopupContainer:Function,getDocument:i.A.func.def(s),forceRender:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},popupAlign:i.A.object.def(()=>({})),popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},maskTransitionName:String,maskAnimation:String,stretch:String,alignPoint:{type:Boolean,default:void 0},autoDestroy:{type:Boolean,default:!1},mobile:Object,getTriggerDOMNode:Function})},87633:function(e,t,o){o.d(t,{T:function(){return s},v:function(){return u}});var i=o(20641);const n=Symbol("PortalContextKey"),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inTriggerContext:!0};(0,i.Gt)(n,{inTriggerContext:t.inTriggerContext,shouldRender:(0,i.EW)(()=>{const{sPopupVisible:t,popupRef:o,forceRender:i,autoDestroy:n}=e||{};let s=!1;return(t||o||i)&&(s=!0),!t&&n&&(s=!1),s})})},u=()=>{s({},{inTriggerContext:!1});const e=(0,i.WQ)(n,{shouldRender:(0,i.EW)(()=>!1),inTriggerContext:!1});return{shouldRender:(0,i.EW)(()=>e.shouldRender.value||!1===e.inTriggerContext)}}}}]);
//# sourceMappingURL=vendors-d68daaec.df9e4094.js.map